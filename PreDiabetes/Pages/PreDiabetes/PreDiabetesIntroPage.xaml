<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:PreDiabetes.ViewModels"
    xmlns:conv="clr-namespace:PreDiabetes.Converters"
    xmlns:resx="clr-namespace:PreDiabetes.Resources.Languages"
    x:Class="PreDiabetes.Pages.PreDiabetesIntroPage"
    x:DataType="vm:PreDiabetesIntroViewModel"
    Title="{Binding Title}"
    BackgroundColor="{StaticResource PageBackgroundColor}">

    <ContentPage.Resources>
        <conv:InverseBoolConverter x:Key="InverseBoolConverter" />

        <ResourceDictionary>
            <Color x:Key="Primary">#2B0B98</Color>
            <Color x:Key="MutedText">#6B6B6B</Color>
            <Color x:Key="CardBackground">#FFFFFF</Color>
            <Color x:Key="PageBackgroundColor">#F4F5FA</Color>
            <Color x:Key="BorderLight">#E6E7F0</Color>

            <Style x:Key="Card" TargetType="Border">
                <Setter Property="Background" Value="{StaticResource CardBackground}" />
                <Setter Property="Stroke" Value="{StaticResource BorderLight}" />
                <Setter Property="StrokeThickness" Value="1" />
                <Setter Property="StrokeShape">
                    <Setter.Value>
                        <RoundRectangle CornerRadius="12" />
                    </Setter.Value>
                </Setter>
                <Setter Property="Padding" Value="12" />
                <Setter Property="Margin" Value="10,8" />
            </Style>

            <Style x:Key="HeaderLabel" TargetType="Label">
                <Setter Property="FontSize" Value="18" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource Primary}" />
            </Style>

            <Style x:Key="BodyLabel" TargetType="Label">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="TextColor" Value="{StaticResource MutedText}" />
                <Setter Property="LineBreakMode" Value="WordWrap" />
            </Style>

            <Style x:Key="PrimaryButton" TargetType="Button">
                <Setter Property="Background" Value="#28A745" />
                <Setter Property="TextColor" Value="White" />
                <Setter Property="CornerRadius" Value="10" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HeightRequest" Value="44" />
                <Setter Property="HorizontalOptions" Value="Fill" />
                <Setter Property="Margin" Value="12,8" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="12" Spacing="6">
            <Label Text="{Binding Title}" Style="{StaticResource HeaderLabel}" Margin="6,2" />
            <Border Style="{StaticResource Card}">
                <VerticalStackLayout Spacing="8">
                    <Label Text="{resx:Localize Key=Intro_OQueAvaliaCalculadora}" Style="{StaticResource HeaderLabel}" />
                    <Label Text="{resx:Localize Key=Intro_Paragrafo_2}"
                           Style="{StaticResource BodyLabel}" />
                </VerticalStackLayout>
            </Border>

            <Border Style="{StaticResource Card}">
                <VerticalStackLayout Spacing="8">
                    <Label Text="{resx:Localize Key=Intro_Paragrafo_3}" Style="{StaticResource HeaderLabel}" />
                    <CollectionView ItemsSource="{Binding Items}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate x:DataType="x:String">
                                <Label Text="{Binding .}" Style="{StaticResource BodyLabel}" Margin="0,4" />
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Border>

            <Border Style="{StaticResource Card}">
                <VerticalStackLayout Spacing="8">
                    <Label Text="{resx:Localize Key=Intro_Paragrafo_4}" Style="{StaticResource HeaderLabel}" />
                    <Label
                      Text="{resx:Localize Key=Intro_Paragrafo_5}"
                      Style="{StaticResource BodyLabel}"
                      Margin="6,4"/>
                </VerticalStackLayout>
            </Border>

            <Label Text="{resx:Localize Key=Intro_Paragrafo_6}" Style="{StaticResource BodyLabel}" HorizontalOptions="Center" Margin="6,2" />

            <Button Text="{resx:Localize Key=Intro_Botao_Simulacao}"
                    Command="{Binding StartSimulationCommand}"
                    Style="{StaticResource PrimaryButton}"
                    AutomationProperties.IsInAccessibleTree="True"
                    AutomationProperties.Name="Iniciar simulação de prediabetes" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
